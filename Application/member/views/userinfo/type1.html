<form ms-controller="userType" ms-widget="validation">
    <div class="m-form-group">
        <label>医生姓名</label>
        <input type="text" class="form-control input-lg"  ms-duplex-required="form.name" data-duplex-event="change" name="name" placeholder="您的姓名">
    </div>
    <div class="m-form-group">
        <label>性别</label>
        <select name="sex" ms-duplex="form.sex" >
            <option value="1">男</option>
            <option value="2">女</option>
        </select>
    </div>
    <div class="m-form-group">
        <label>所在地</label>
        <div ms-include-src="app.$tplUrl+'chooseArea.html'" data-include-replace="true"></div>
    </div>
    <div class="m-form-group">
        <label >所在医院</label>
        <input type="text" class="form-control input-lg" ms-duplex-required="form.hospital" data-duplex-event="change"  name="hospital"  placeholder="您的工作医院">
    </div>
    <div ms-include-src="app.$tplUrl+'chooseKs.html?'+app.$v" data-include-replace="true"></div>
    <button type="submit"  ms-class="u-btn-c4:isLock"  class="u-btn u-btn-lg f-mt15" >{{isLock?'稍等...':'保存';}}</button>
</form>
<script>
    var userType=avalon.define({
        $id:'userType',
        isLock:0,
        form:{name:'',sex:'1',hospital:''},
        validation: app.$getValidation(function(form){
        userType.isLock=1;
            $.post(app.$host+'member/info/add',$(form).serialize(),function(data) {
                if(data.error){
                    $.showMsg(data.error,2);
                    userType.isLock=0;
                }else{//输入成功
                    $.showMsg('保存成功',1);
                }
            });
        })
    });
    userType.$watch("setData", function(form){
        sys.extend(userType.form,form);
    });

</script>
